meta {
  name: 로그인(일반사용자)
  type: http
  seq: 2
}

post {
  url: {{url}}/users/login
  body: json
  auth: inherit
}

body:json {
  {
    "email": "test@test.com",
    "password": "test"
  }
}

script:post-response {
  // 로그인 성공 후
  if(res.status === 200){
    if(req.url.split('?')[0] === `${bru.getEnvVar('url')}/users/login`){
      bru.setEnvVar('accessToken', res.body.item.token.accessToken);
      bru.setEnvVar('refreshToken', res.body.item.token.refreshToken);
    }else if(req.url === `${bru.getEnvVar('url')}/auth/refresh`){ // accessToken 재발행 후
      bru.setEnvVar('accessToken', res.body.accessToken);
    }
  }
}
